<div class="container">
    <div class="row justify-content-center mt-5">
        <div class="col-10 fs-5">
            <p class="text-center">
                This <strong>"getting started"</strong> page will guide you through your first <strong>ApiRTC</strong>
                implementation.
            </p>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col">
            <h1>
                Load ApiRTC library
            </h1>
            <ul class="nav nav-tabs mt-5" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="js-tab" data-bs-toggle="tab" data-bs-target="#js" type="button"
                        role="tab" aria-controls="js" aria-selected="false" value="" name=""
                        (click)="lang='javascript'">JS</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="angular-tab" data-bs-toggle="tab" data-bs-target="#angular"
                        type="button" role="tab" aria-controls="angular" aria-selected="true" value="" name=""
                        (click)="lang='javascript'">Angular</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="react-tab" data-bs-toggle="tab" data-bs-target="#react" type="button"
                        role="tab" aria-controls="react" aria-selected="false" value="" name=""
                        (click)="lang='javascript'">ReactJS</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="vuejs-tab" data-bs-toggle="tab" data-bs-target="#vuejs" type="button"
                        role="tab" aria-controls="vuejs" aria-selected="false" value="" name=""
                        (click)="lang='javascript'">VueJS</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="android-tab" data-bs-toggle="tab" data-bs-target="#android"
                        type="button" role="tab" aria-controls="android" aria-selected="false" value="" name=""
                        (click)="lang='kotlin'">Android</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="ios-tab" data-bs-toggle="tab" data-bs-target="#ios" type="button"
                        role="tab" aria-controls="ios" aria-selected="false" value="" name=""
                        (click)="lang='swift'">iOS</button>
                </li>
            </ul>
            <div class="tab-content">
                <div class="tab-pane mt-3 fade show active" id="js" role="tabpanel" aria-labelledby="js-tab">
                    <p>
                        In your <code>.html</code> file, load the <strong>ApiRTC</strong>&nbsp;<strong>js
                            library</strong> from the <code>&lt;head&gt;...&lt;/head&gt;</code> tag:
                    </p>
                    <button mat-icon-button class="float-end" [cdkCopyToClipboard]="html_script"><span
                        class="material-icons">content_copy</span></button>
                    <pre><code [highlight]="html_script"></code></pre>
                </div>
                <div class="tab-pane mt-3 fade" id="angular" role="tabpanel" aria-labelledby="angular-tab">
                    <p>
                        In your project directory, run:
                    </p>
                    <button mat-icon-button class="float-end" [cdkCopyToClipboard]="npm_install"><span
                        class="material-icons">content_copy</span></button>
                    <pre><code [highlight]="'$ '+npm_install"></code></pre>
                    <p class="mt-3">
                        In
                        <code>angular.json</code> add in <code>scripts</code>:
                    </p>
                    <pre><code [highlight]="angular_json" [languages]="['json']"></code></pre>
                </div>
                <div class="tab-pane mt-3 fade" id="react" role="tabpanel" aria-labelledby="react-tab">
                    <p>
                        In your project directory, run:
                    </p>
                    <button mat-icon-button class="float-end" [cdkCopyToClipboard]="npm_install"><span
                        class="material-icons">content_copy</span></button>
                    <pre><code [highlight]="'$ '+npm_install"></code></pre>
                </div>
                <div class="tab-pane mt-3 fade" id="vuejs" role="tabpanel" aria-labelledby="vuejs-tab">
                    <p>
                        In your project directory, run:
                    </p>
                    <button mat-icon-button class="float-end" [cdkCopyToClipboard]="npm_install"><span
                        class="material-icons">content_copy</span></button>
                    <pre><code [highlight]="'$ '+npm_install"></code></pre>
                </div>
                <div class="tab-pane mt-3 fade" id="android" role="tabpanel" aria-labelledby="android-tab">
                    <p>
                        In <code>build.gradle</code>, add:
                    </p>
                    <pre><code [highlight]="android_dependency"></code></pre>
                </div>
                <div class="tab-pane mt-3 fade" id="ios" role="tabpanel" aria-labelledby="ios-tab">
                    <div class="alert alert-warning" role="alert">
                        Requires iOS 12+, Swift 5+, Xcode 12+
                    </div>
                    <p>CocoaPods installation</p>
                    <pre><code [highlight]="ios_pod"></code></pre>
                    <p>Use Podfile post_install setup to properly link dependencies:</p>
                    <pre><code [highlight]="ios_post_install"></code></pre>
                </div>
            </div>
        </div>
    </div>
    <div class="row mt-5">
        <div class="col">
            <hr />
        </div>
    </div>
    <div class="row">
        <div class="col">
            <p class="fs-5">
                Before we start coding... let's walk through the main concepts and classes:
            </p>
            <ul>
                <li>
                    First, each run of a client application instantiates one <code>UserAgent</code> representing the
                    local individual,
                </li>
                <li>
                    A <code>Session</code> must be opened with <strong>ApiRTC</strong>'s servers to create a
                    <code>Conversation</code> to which individuals can join,
                </li>
                <li>
                    In a <code>Conversation</code>, individuals can <strong>chat</strong>, <strong>watch</strong>,
                    <strong>listen</strong> and/or <strong>share</strong>&nbsp;<strong>real-time audio, video, data,
                        screen...</strong>,
                </li>
                <li>
                    A <code>Contact</code> represents a peer individual,
                </li>
                <li>
                    A <code>Stream</code> is audio, and/or video captured from sources available from browser and
                    published on a
                    <code>Conversation</code>.
                </li>
            </ul>
            <div class="alert alert-info" role="alert">
                <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:">
                    <use xlink:href="#info-fill"></use>
                </svg>
                <span>The <strong>ApiRTC</strong> api references can be found at:</span>
                <ul class="mt-3 ps-5">
                    <li>
                        javascript: <a href="https://dev.apirtc.com/reference/index.html" target="_blank"
                            rel="noopener">https://dev.apirtc.com/api/reference</a>
                    </li>
                    <li>
                        android sdk:
                    </li>
                    <li>
                        ios sdk:
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <hr />
        </div>
    </div>
    <h1 class="mt-5">
        UserAgent
    </h1>
    <p>
        As the entry point to <strong>ApiRTC</strong>, <code>UserAgent</code> is instantiated using the
        <strong>apiKey</strong> associated to your <strong>enterprise</strong> account on <a
            href="https://www.apirtc.com" target="_blank" rel="noopener">https://www.apirtc.com</a>.
    </p>
    <p class="alert alert-info" role="alert">
        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:">
            <use xlink:href="#info-fill"></use>
        </svg>
        <span>
            Get your <strong>apiKey</strong> from <a href="https://cloud.apirtc.com/enterprise/api" target="_blank"
                rel="noopener">https://cloud.apirtc.com/enterprise/api</a>
        </span>
    </p>
    <p class="text-center my-5">
        <img src="./assets/apirtc_useragent.svg" class="img-fluid" alt="UserAgent" />
    </p>
    <app-codenav [code]="useragent" [(language)]="lang"></app-codenav>
    <h1 class="mt-5">
        Stream
    </h1>
    <p>
        When <code>UserAgent.createStream(options)</code> is called, a popup opens in the browser to request user
        acceptance for using media devices. The returned <code>Promise</code> resolves with an instance of
        <code>Stream</code>, which
        carries <strong>media stream</strong> from computer device through the browser.
    </p>
    <p>
        The method <code>Stream.attachToElement(domElement)</code> binds the <strong>media stream</strong> to a DOM
        <code>&lt;video&gt;</code> element in order to display it in the web page.
    </p>
    <p class="text-center my-5">
        <img src="./assets/apirtc_createstream.svg" class="img-fluid" alt="createstream" />
    </p>
    <app-codenav [code]="createStream" [(language)]="lang"></app-codenav>
    <h1 class="mt-5">
        Session
    </h1>
    <p>
        To use <strong>ApiRTC</strong>'s connected features, a <code>userAgent</code> must register to get a
        <strong>session</strong>. This can be done with or without authentication.
    </p>
    <p>
        Simply using <code>UserAgent.register()</code> without authentication details registers a
        <code>userAgent</code> with
        <strong>ApiRTC</strong>'s servers without authentication.
    </p>
    <p class="text-center my-5">
        <img src="./assets/apirtc_useragent_register.svg" class="img-fluid" alt="register" />
    </p>
    <app-codenav [code]="register" [(language)]="lang"></app-codenav>
    <p>
        The <code>session</code> grants access to connected features such like <strong>conversations</strong> or
        <strong>conferences</strong>.
    </p>
    <h1 class="mt-5">
        Conversation
    </h1>
    <p>
        An instance of <code>Conversation</code> is obtained from <code>Session.getOrCreateConversation(name)</code>.
    </p>
    <p class="text-center my-5">
        <img src="./assets/apirtc_session_getOrCreateConversation.svg" class="img-fluid"
            alt="getOrCreateConversation" />
    </p>
    <app-codenav [code]="getOrCreateConversation" [(language)]="lang"></app-codenav>
    <h2 class="mt-5">
        Join
    </h2>
    <p>
        Calling <code>Conversation.join()</code> makes the <code>userAgent</code> used to create the
        <code>Session</code> used to create this instance of
        <code>Conversation</code> (through it's <code>Session</code>) join the
        <strong>conversation</strong>.
    </p>
    <p class="text-center my-5">
        <img src="./assets/apirtc_conversation_join.svg" class="img-fluid" alt="join" />
    </p>
    <app-codenav [code]="join" [(language)]="lang"></app-codenav>
    <h2 class="mt-5">
        Publish Streams
    </h2>
    <p>
        Once a <strong>conversation</strong> joined, a <code>userAgent</code> can publish a
        <strong>stream</strong> using <code>Conversation.publish(stream)</code> method:
    </p>
    <p class="text-center my-5">
        <img src="./assets/apirtc_conversation_publish.svg" class="img-fluid" alt="publish" />
    </p>
    <app-codenav [code]="publish" [(language)]="lang"></app-codenav>
    <h2 class="mt-5">
        Subscribe to Streams
    </h2>
    <p>
        Subscribing to peer <strong>streams</strong> shall be implemented as followed:
    </p>
    <ul>
        <li>
            <p>
                Listen on <code>Conversation</code>&nbsp;<code>'streamListChanged'</code> event to get notified of
                <strong>streams</strong> published to the
                <strong>conversation</strong>. The data provided by the event is a
                <code>StreamInfo</code>: It gives information on <strong>streams</strong> published in the conversation
                such as the id (<code>StreamInfo.streamId</code>) of the <strong>stream</strong>.
                <code>StreamInfo.listEventType</code> property tells whether the event is triggered for and addition
                (value
                <code>'added'</code>) or a removal.
            </p>
        </li>
        <li>
            <p>
                Calling <code>conversation.subscribeToStream(streamId)</code> with the <code>StreamInfo.streamId</code>
                of an added remote stream makes this
                <strong>conversation</strong> subscribe to a
                <strong>stream</strong>.
            </p>
        </li>
        <li>
            <p>
                Finally, listening on <code>Conversation</code>&nbsp;<code>'streamAdded'</code> notifies with a
                <code>Stream</code> instance which can be attached to web page for display.
            </p>
        </li>
    </ul>
    <p class="text-center my-5">
        <img src="./assets/apirtc_conversation_subscribe.svg" class="img-fluid" alt="subscribe" />
    </p>
    <app-codenav [code]="subscribe" [(language)]="lang"></app-codenav>
    <p class="mt-3">
    </p>
    <div class="alert alert-warning" role="alert">
        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Warning:">
            <use xlink:href="#exclamation-triangle-fill"></use>
        </svg>
        <span>This publish/subscribe mechanism is important:</span>
        <p class="mt-3">
            A <strong>stream</strong> published to a conversation can be restarted for various technical reasons. In
            this case the
            <code>'streamListChanged'</code> won't be fired ; but the <code>'streamRemoved'</code> event will be fired
            with corresponding
            <code>Stream</code> instance, and a <code>'streamAdded'</code> with the new instance will follow, allowing
            to display correct <code>Stream</code>.
        </p>
        <p class="mt-3">
            It is then important to listen on <code>'streamRemoved'</code> to stop displaying the corresponding
            <code>Stream</code>.
        </p>
        <hr>
        <p class="mb-0">
            Also, handling the remote <code>streamInfo.listEventType === 'removed'</code> is important to get notified
            that a
            <strong>stream</strong> is not published anymore.
        </p>
    </div>
    <p class="mt-5">
    </p>
    <div class="alert alert-success d-flex align-items-center" role="alert">
        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:">
            <use xlink:href="#check-circle-fill"></use>
        </svg>
        <div>
            At this stage, the application displays both local and remote video <strong>streams</strong> in the page !
        </div>
    </div>
    <p class="mt-5">
    </p>
    <!-- TODO: provide a simple sample for each framework -->
    <div class="alert alert-info text-center" role="alert">
        <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Info:">
            <use xlink:href="#info-fill"></use>
        </svg>
        <span>Find full code of <strong>getting started apps</strong>:</span>
        <div class="row mt-3 ">
            <div class="col">
                <p>Web</p>
                <ul>
                    <li>
                        <a href="https://github.com/ApiRTC/ApiRTC-angular" target="_blank" rel="noopener">Angular</a>,
                    </li>
                    <li>
                        <a href="https://github.com/ApiRTC/apirtc-react" target="_blank" rel="noopener">React</a>,
                    </li>
                    <li>
                        <a href="https://github.com/ApiRTC/apirtc-vuejs" target="_blank" rel="noopener">VueJS</a>
                    </li>
                </ul>
            </div>
            <div class="col">
                <p>Mobile</p>
                <ul>
                    <li>
                        <a href="https://github.com/apizee/ApiRTC_Android_sample" target="_blank"
                            rel="noopener">Android</a>,
                    </li>
                    <li>
                        <a href="https://github.com/apizee/ApiRTC-iOS-Samples" target="_blank" rel="noopener">iOS</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>